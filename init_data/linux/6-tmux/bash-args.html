<h1>Консоль. Переменные окружения, аргументы командной строки.</h1>

<p>Передположим мы хотим создать bash скрипт для подсчета количества слов в файле.</p>

<p>Существует встренная команда, которая это делает.</p>

<pre><code>wc filename
</code></pre>

<p>Пишем простой скрипт count.sh.</p>

<pre><code>echo 'Counting...'
</code></pre>

<p>Делаем его исполняемым.</p>

<pre><code>chmod +x count.sh
</code></pre>

<p>При выполнении с параметром </p>

<pre><code>./count.sh log.txt
</code></pre>

<p>необходимо его забрать изнутри скрипта.</p>

<pre><code>FILE=$1
echo "Counting...$FILE"
wc $FILE
</code></pre>

<p>Передача переменного количества параметров.</p>

<pre><code>for FILE in "$@"
do
wc $FILE
done
</code></pre>

<p>Запуск.</p>

<pre><code>./count.sh log.txt log2.txt log3.txt
</code></pre>

<p>Работа с именованными аргументами.</p>

<pre><code>./count.sh -a myvar -b


while getopts "a:b" option
do
case "${option}" in
u) echo "user - $option |$OPTARG|";;
d) echo "dir - $option |$OPTIND|";;
esac
done
</code></pre>

<p>Тут надо упомянуть о специальных переменных, используемых getopts:</p>

<p>$OPTIND — хранит «внутренний индекс», по которому getopts определяет очередность выполнения опций;</p>

<p>$OPTARG — содержит аргумент, передаваемый опции;</p>

<p>$OPTERR — содержит код ошибки, обычно 1.        </p>

<p>При использовании $OPTARG необходим ставить двоеточие после ключа после getopts.        </p>
