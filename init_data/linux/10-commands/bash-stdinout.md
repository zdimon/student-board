# Стандартные потоки Linux

Стандартный поток ввода stdin(0)

Стандартным потоком ввода (stdin) является
клавиатура. В большинстве случаев, поток входных
данных вводится именно через клавиатуру.


Стандартный поток вывода stdout(1)

Стандартный вывод (stdout) – это поток, в который
программы выводят результаты работы. Обычно эти
данные отображаются на экране монитора.


Стандартный поток ошибок stderr(2)

Стандартный поток ошибок (stderror) – поток,
используемый для вывода сообщений об ошибках и
диагностики. Этот поток независим от стандартного
потока вывода и может перенаправляться отдельно.


## Символы перенаправления.

> - перенаправляет с заменой. Создает новый файл, содержащий данные стандартного
потока вывода. Если указанный файл существует, то он
перезаписывается.

>> - перенаправляет с дополнением. Создает новый файл, содержащий данные стандартного
потока вывода. Если указанный файл существует, то он
дописывается.

2> - перенапрявляет поток ошибок. Создает новый файл, содержащий данные стандартного
потока ошибок. Если указанный файл существует, то он
перезаписывается.

2>> - Добавляет информацию со стандартного потока вывода в
существующий файл. Если указанный файл не
существует, то он создается.

&> - Создает новый файл, содержащий данные стандартного
потока вывода и потока ошибок. Если указанный файл
существует, то он перезаписывается.

2>&1 - Выводит стандартные потоки вывода и ошибок в один
файл.

< - Перенаправляет содержимое файла как стандартный
поток ввода.

| - Перенаправляет стандартный поток вывода одной
команды в стандартный поток ввода другой команды.

Если у вас есть программа handywork читающая ввод из stdin и отправляющая данные в stdout, то это можно легко переопределить.

К примеру такая программа на языке Python t.py.

    #!/usr/bin/env python
    d = input('name?')
    print('Hello %s' % d)

Может быть запущена так:

    t.py < in.dat > out.dat

если с ошибками то

    t.py < in.dat > out.dat 2> err.dat

При перенаправлении результата с использованием символа > файл будет создан
или обрезан (то есть из файла будет удалено содержимое). Если вы хотите заранее
сохранить имеющееся содержимое данного файла, вам следует его дополнить, используя символ >> , как показано ниже:

Следующая строка:

    t.py < data.in &>> results.out

позволяет выполнить t.py , а затем добавить и stdout, и stderr в файл results.out ,
не перезаписывая поверх существующего содержимого.



## Команда tee

Если нужно одновременно увидель результаты и переправить вывод в файл используется команда tee

    handywork < data.in | tee

использование параметра -a допишет в файл


## Команда xargs

Команда xargs объединяет зафиксированный набор заданных в командной строке начальных аргументов с аргументами, прочитанными со стандартного ввода, и выполняет указанную команду один или несколько раз.

Означает что она может передавать вывод одной команды качестве аргумента другой команде.

Если команда не указана, xargs выполняет эхо вывод по умолчанию.

Таким образом преобразовать вывод множества строк из команды ls в одну строку, используя xargs следующим образом:

    ls -1 | xargs

Или создать компактный вывод списка пользователей системы

    cut -d: -f1 < /etc/passwd | sort | xargs

Посчитать количество символов и строк файлов

    ls | xargs wc

Данная команда принимает на вход поток вывода от команды echo и отправляет его как аргументы в команду echo

    echo A B C | xargs echo

Данная команда принимает на вход поток вывода от команды echo и отправляет его как аргументы в команду echo, запуская для каждой группы из одного параметра (т. е. для каждого параметра) отдельный процесс

    echo A B C | xargs -n 1 echo

**-n число** - Выполнить команду, используя максимально возможное количество аргументов, прочитанных со стандартного ввода, но не более заданного числа. 


**-I зам_цеп** - Режим вставки: команда выполняется для каждой строки стандартного ввода, причём вся строка рассматривается как один аргумент и подставляется в начальные_аргументы вместо каждого вхождения цепочки символов зам_цеп.



